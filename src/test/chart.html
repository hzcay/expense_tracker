<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        height: 100vh;
        margin: 0;
        padding-top: 20px;
        background: #fff;
        overflow: hidden;
      }
      ::-webkit-scrollbar {
        display: none;
      }
    </style>
  </head>
  <body>
    <div style="width: 80%; height: 70%">
      <canvas id="myChart"></canvas>
    </div>
    <script>
      const ctx = document.getElementById('myChart');
      new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Category1', 'Category2', 'Category3'], // Replace with your actual labels
          datasets: [
            {
              data: [300, 500, 200], // Replace with your actual data
              backgroundColor: [
                'rgba(255, 99, 132, 0.8)',
                'rgba(54, 162, 235, 0.8)',
                'rgba(255, 206, 86, 0.8)',
                'rgba(75, 192, 192, 0.8)',
                'rgba(153, 102, 255, 0.8)',
                'rgba(255, 159, 64, 0.8)',
                'rgba(69, 183, 209, 0.8)',
                'rgba(150, 201, 61, 0.8)',
                'rgba(255, 160, 122, 0.8)',
                'rgba(221, 160, 221, 0.8)',
              ],
              borderWidth: 2,
              borderColor: '#ffffff',
              hoverOffset: 4,
            },
          ],
        },
        options: {
          cutout: '65%',
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'bottom',
              labels: {
                padding: 20,
                usePointStyle: true,
                font: {
                  size: 12,
                  family: 'Inter',
                },
              },
            },
            tooltip: {
              callbacks: {
                label: function (context) {
                  let label = context.label || '';
                  let value = context.parsed;
                  let total = context.dataset.data.reduce((a, b) => a + b, 0);
                  let percentage = ((value * 100) / total).toFixed(1);
                  return `${label}: $${value} (${percentage}%)`;
                },
              },
              padding: 12,
              backgroundColor: 'rgba(0,0,0,0.8)',
              titleFont: { size: 14 },
              bodyFont: { size: 13 },
            },
          },
        },
        plugins: [
          {
            id: 'centerText',
            afterDraw: (chart) => {
              const ctx = chart.ctx;
              const width = chart.width;
              const height = chart.height;

              ctx.restore();
              ctx.save();

              // Calculate text width for centering
              ctx.font = 'bold 24px Inter';
              const text = 'Expense';
              const textWidth = ctx.measureText(text).width;

              // Center position
              const centerX = width / 2;
              const centerY = height / 2 - 25;

              // Draw text at center
              ctx.textBaseline = 'middle';
              ctx.textAlign = 'center';
              ctx.fillStyle = '#666';
              ctx.fillText(text, centerX, centerY);

              ctx.restore();
            },
          },
        ],
      });
    </script>
  </body>
</html>
